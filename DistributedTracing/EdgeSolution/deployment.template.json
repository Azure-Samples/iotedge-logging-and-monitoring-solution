{
  "content": {
    "modulesContent": {
      "$edgeAgent": {
        "properties.desired.modules.tempSensor": {
          "settings": {
            "image": "kaizentm/iotsample-simulatedtemperaturesensor:0.0.1",
            "createOptions": ""
          },
          "type": "docker",
          "env": {
            "MessageDelay": {
                "value": "00:00:05"
            },
            "INSTRUMENTATION_KEY": {
              "value": "${INSTRUMENTATION_KEY}"
            },
            "AI_CONNECTION_STRING": {
              "value": "${AI_CONNECTION_STRING}"
            },
            "OTLP_ENDPOINT": {
              "value": "${OTLP_ENDPOINT}"
            }              
          },
          "status": "running",
          "restartPolicy": "always",
          "version": "1.0"
        },
        "properties.desired.modules.FilterModule": {
          "settings": {
            "image": "kaizentm/iotsample-filtermodule:0.0.1",
            "createOptions": ""
          },
          "type": "docker",
          "env": {
            "INSTRUMENTATION_KEY": {
              "value": "${INSTRUMENTATION_KEY}"
            },
            "AI_CONNECTION_STRING": {
              "value": "${AI_CONNECTION_STRING}"
            },
            "OTLP_ENDPOINT": {
              "value": "${OTLP_ENDPOINT}"
            }                    
          },
          "status": "running",
          "restartPolicy": "always",
          "version": "1.0"
        },              
      "properties.desired.modules.Opentelemetrycollector": {
        "settings": {
          "image": "kaizentm/iotsample-opentelemetrycollector:0.0.1",
          // "createOptions": {
          //   "Hostname": "opentelemetrycollector",
          //   "HostConfig": {
          //     "PortBindings": {
          //       "4317/tcp": [
          //         {
          //           "HostPort": "4317"
          //         }
          //       ],
          //       "4318/tcp": [
          //         {
          //           "HostPort": "4318"
          //         }
          //       ],
          //       "55679/tcp": [
          //         {
          //           "HostPort": "55679"
          //         }
          //       ],
          //       "1888/tcp": [
          //         {
          //           "HostPort": "1888"
          //         }
          //       ]
          //     }
          //   }
          // }
        },
        "type": "docker",
        "status": "running",
        "restartPolicy": "always",
        "version": "1.0"
      }                    
     },      
     "$edgeHub": {
      "properties.desired.routes.tempSensor": "FROM /messages/modules/tempSensor/outputs/temperatureOutput INTO BrokeredEndpoint(\"/modules/FilterModule/inputs/input1\")",
      "properties.desired.routes.FilterModule": "FROM /messages/modules/FilterModule/outputs/* INTO $upstream" 
    }
  }
 }
}
